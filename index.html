<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>EM</title>

    <link rel="stylesheet" href="Content/css/jquery.fullpage.min.css">
    <link rel="stylesheet" href="Content/css/main.css">

</head>

<body>

    <header id="header">
        <nav>
            <ul class="menuUl">
                <li id="menu">
                    <div>
                        <div class="menu-line"></div>
                        <!-- <img src="Content/img/menu.svg" alt="" class="menu"> -->
                    </div>


                    <p class="d-sm-none">MENU</p>
                </li>
                <li>
                    <img src="Content/img/cart.svg" alt="">
                </li>
            </ul>
            <div class="menu-list">
                <div class="logo-area">
                    <img src="Content/img/logo.svg" alt="">
                    <p style="font-size:16px;margin:10px 0;">POWER ON THE GO</p>
                </div>
                <div class="lists">
                    <ul>
                        <li>
                            <a href="power.json" class="sub" data-hoversrc="Content/img/navImg.png">Power</a>
                        </li>

                        <li>
                            <a href="cable.json" class="sub" data-hoversrc="Content/img/shop_1.png">Cable</a>
                        </li>

                        <li>
                            <a href="Accessories.json" class="sub" data-hoversrc="Content/img/shop_2.png">Accessories</a>
                        </li>

                    </ul>
                    <div class="showImg">
                        <img src="Content/img/navImg2.png" alt="" class="img-fluid">
                    </div>
                    <ul>
                        <li>
                            <a href="">News</a>
                        </li>
                        <li>
                            <a href="">About</a>
                        </li>
                        <li>
                            <a href="">FAQ</a>
                        </li>
                    </ul>
                </div>


            </div>

            <div class="sibling-menu-list">
                <div class="back">
                    <img src="Content/img/back.svg" alt="" class="img-fluid">
                </div>
                <!-- 次選單商品列表 -->
                <ul>
                    <!-- <li>
                        <img src="Content/img/shop.png" class="img-fluid" alt="">
                        <p>3 Port Travel Charger
                            <span>60W with Type-C Port</span>
                        </p>
                        <ul class="dots">
                            <li style="background:#000;" data-src="Content/img/shop.png"></li>
                            <li style="background:#eee;" data-src="Content/img/shop_1.png"></li>
                        </ul>
                    </li>
                    <li>
                        <img src="Content/img/shop.png" class="img-fluid" alt="">
                        <p>3 Port Travel Charger
                            <span>60W with Type-C Port</span>
                        </p>
                        <ul class="dots">
                            <li style="background:#000;" data-src="Content/img/shop_1.png"></li>
                            <li style="background:#fee;" data-src="Content/img/shop_2.png"></li>
                            <li style="background:#f00;" data-src="Content/img/shop_3.png"></li>
                        </ul>
                    </li>
                    <li>
                        <img src="Content/img/shop_1.png" class="img-fluid" alt="">
                        <p>3 Port Travel Charger
                            <span>60W with Type-C Port</span>
                        </p>
                        <ul class="dots">
                            <li style="background:#000;"></li>
                            <li></li>
                        </ul>
                    </li>
                    <li>
                        <img src="Content/img/shop_2.png" class="img-fluid" alt="">
                        <p>3 Port Travel Charger
                            <span>60W with Type-C Port</span>
                        </p>
                        <ul class="dots">
                            <li style="background:#000;"></li>
                            <li></li>
                        </ul>
                    </li>
                    <li>
                        <img src="Content/img/shop_3.png" class="img-fluid" alt="">
                        <p>3 Port Travel Charger
                            <span>60W with Type-C Port</span>
                        </p>
                        <ul class="dots">
                            <li style="background:#000;"></li>
                            <li></li>
                        </ul>
                    </li>
                    <li>
                        <img src="Content/img/shop.png" class="img-fluid" alt="">
                        <p>3 Port Travel Charger
                            <span>60W with Type-C Port</span>
                        </p>
                        <ul class="dots">
                            <li style="background:#000;"></li>
                            <li></li>
                        </ul>
                    </li>
                    <li>
                        <img src="Content/img/shop_1.png" class="img-fluid" alt="">
                        <p>3 Port Travel Charger
                            <span>60W with Type-C Port</span>
                        </p>
                        <ul class="dots">
                            <li style="background:#000;"></li>
                            <li style="background:#000;"></li>
                        </ul>
                    </li>
                    <li>
                        <img src="Content/img/shop_2.png" class="img-fluid" alt="">
                        <p>3 Port Travel Charger
                            <span>60W with Type-C Port</span>
                        </p>
                        <ul class="dots">
                            <li style="background:#000;"></li>
                            <li style="background:#eee;"></li>
                        </ul>
                    </li> -->
                </ul>
            </div>
        </nav>
    </header>
    <!-- 第一區塊  -->
    <div class="mainSlider slider-container">
        <div class="slider-wrapper" id="fullpage">
            <div class="section">
                <div class="video-wrap">
                    <video src="Content/img/indexBG.mp4" autoplay muted loop data-autoplay autoplay playsinline></video>
                </div>

                <div class="content">
                    <div class="container">
                        <h2 class="target">POWER
                            <br>ON THE GO</h2>
                    </div>

                </div>
            </div>
            <div class="section thumbnail" style="background-image:url('Content/img/section2.jpg')">

                <div class="content">
                    <div class="container">

                        <!-- 圖文編輯器內容 -->
                        <div class="main-content">
                            <h2 class="target">POWER</h2>
                            <p style="" class="target">Work in more than 150 contries</p>
                        </div>
                        <a href="product.html" class="target">Explore</a>
                    </div>
                </div>
                <!-- 設定的圖片 -->
                <img src="Content/img/item.png" alt="" class="bgimg">
            </div>
            <div class="section thumbnail" style="background-image:url('Content/img/section3.jpg')">
                <div class="content">
                    <div class="container">
                        <!-- 圖文編輯器內容 -->
                        <div class="main-content">
                            <h2 class="target">POWER</h2>
                            <p style="" class="target">Work in more than 150 contries</p>
                        </div>
                        <a href="product.html" class="target">Explore</a>
                    </div>
                </div>
                <!-- 設定的圖片 -->
                <img src="Content/img/item2.png" alt="" class="bgimg">
            </div>
            <div class="section thumbnail" style="background-image:url('Content/img/section2.jpg')">

                <div class="content">
                    <div class="container">


                        <!-- 圖文編輯器內容 -->
                        <div class="main-content">
                            <h2 class="target">POWER</h2>
                            <p class="target">Work in more than 150 contries</p>
                        </div>
                        <a href="product.html" class="target">Explore</a>
                    </div>
                </div>
                <!-- 設定的圖片 -->
                <img src="Content/img/item3.png" alt="" class="bgimg">
            </div>
            <div class="section fp-auto-height fp-auto-height-responsive">
                <footer>
                    <ul>
                        <li>
                            <div>
                                <img src="Content/img/logo2.svg" alt="" width="163px">
                                <p>© 2017 EnergieMAX Design Corp. All Rights Reserved
                                </p>
                            </div>

                        </li>
                        <li>
                            <h4>Product</h4>
                            <ul>
                                <li>Power</li>
                                <li>Cable</li>
                                <li>Accessories</li>
                            </ul>
                        </li>
                        <li>
                            <h4>Support</h4>
                            <ul>
                                <li>FAQ</li>
                                <li>Warranty</li>
                                <li>Privacy Policy</li>
                                <li>Terms & Conditions</li>
                            </ul>
                        </li>
                        <li>
                            <h4>About EnergieMAX
                            </h4>
                            <ul>
                                <li>News</li>
                                <li>Contact</li>
                            </ul>
                        </li>
                    </ul>

                </footer>
            </div>

        </div>
        <!-- Add Pagination -->
        <div id="dots" class="d-sm-none">
            <div data-menuanchor="firstPage" class="dot active">
                <a href="#firstPage"></a>
            </div>
            <div data-menuanchor="secondPage" class="dot">
                <a href="#secondPage"></a>
            </div>
            <div data-menuanchor="3rdPage" class="dot">
                <a href="#3rdPage"></a>
            </div>
            <div data-menuanchor="4thPage" class="dot">
                <a href="#4thPage"></a>
            </div>
        </div>

        <!--  -->
        <div class="slider-footer">
            <ul>
                <li class="d-sm-none">
                    <a href="">
                        <img src="Content/img/logo.svg" alt="" width="150px" style="margin:30px 0;">
                    </a>
                    <p style="font-size:18px" class="">2017 All Right Reserved</p>
                </li>
                <li class="text-center">
                    <img src="Content/img/arrow.svg" alt="" class="inlineBlock arrow" id="moveSectionDown">
                    <p class="inlineBlock d-sm-none ">Scrool Down</p>
                </li>
                <li class="text-right contact d-sm-none">
                    <p class="inlineBlock ">EN / CN</p>
                    <a href="">
                        <img src="Content/img/fb.svg" alt="" class="inlineBlock">
                    </a>
                    <a href="">
                        <img src="Content/img/mail.svg" alt="" class="inlineBlock">
                    </a>
                </li>
            </ul>
        </div>

    </div>



    <!-- jQuery JS 1.12.4 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="scripts/jquery.fullpage.min.js"></script>
    <script src="scripts/jquery.fullpage.extensions.min.js"></script>
    <script src="scripts/scrolloverflow.min.js"></script>
    <script src="scripts/bgcheck.js"></script>

    <script type="text/javascript">
        BackgroundCheck.init({
            targets: '.target',
            images: '.thumbnail'
        });
        $(document).ready(function () {

            // fullpage 螢幕高
            $('#fullpage').fullpage({
                anchors: ['firstPage', 'secondPage', '3rdPage', '4thPage', 'footer'],
                menu: '#dots',
                keyboardScrolling: true,
                animateAnchor: true,
                scrollOverflow: true,
                // responsiveWidth: 576,
                onLeave: function (index, nextIndex, direction) {
                    var leavingSection = $(this);

                    //after leaving section 2
                    if (index == 4 && direction == 'down') {
                        $('.slider-footer').fadeOut();
                        $('#dots').fadeOut();
                    } else {
                        $('.slider-footer').fadeIn();
                        $('#dots').fadeIn();
                    }
                },
                afterLoad: function (anchorLink, index) {
                    BackgroundCheck.refresh();
                },
                afterRender: function () {
                    BackgroundCheck.refresh();
                }

            });
            // 點箭頭往下移動
            $('#moveSectionDown').click(function (e) {
                e.preventDefault();
                $.fn.fullpage.moveSectionDown();
            });
            // 展開選單
            $('#menu').click(function () {
                event.preventDefault();
                $(this).find('.menu-line').toggleClass('active');
                $('.menu-list').toggleClass('active');

                $('.mainSlider').toggleClass('unscroll');
                // 點開選單
                if ($('.menu-list').hasClass('active')) {
                    $.fn.fullpage.destroy('all');
                } else if (!$('.menu-list').hasClass('active')) {
                    // 關閉選單

                    $('#fullpage').fullpage({
                        anchors: ['firstPage', 'secondPage', '3rdPage', '4thPage', 'footer'],
                        menu: '#dots',
                        keyboardScrolling: true,
                        animateAnchor: true,
                        scrollOverflow: true,
                        // responsiveWidth: 576,
                        onLeave: function (index, nextIndex, direction) {
                            var leavingSection = $(this);

                            //after leaving section 2
                            if (index == 4 && direction == 'down') {
                                $('.slider-footer').fadeOut();
                                $('#dots').fadeOut();
                            } else {
                                $('.slider-footer').fadeIn();
                                $('#dots').fadeIn();
                            }
                        },
                        afterLoad: function (anchorLink, index) {
                            BackgroundCheck.refresh();
                        },
                        afterRender: function () {
                            BackgroundCheck.refresh();
                        }

                    });
                    $('.sibling-menu-list').removeClass('active');
                }


            })
            // 次級選單
            $('.lists .sub').each(function () {
                $(this).hover(function () {

                    var hoverSrc = $(this).data('hoversrc');
                    console.log(hoverSrc);
                    $('.showImg img').attr('src', hoverSrc);
                })

                $(this).on('click', function () {
                    var list = $('.sibling-menu-list ul');
                    var jsonLink = $(this).attr('href');
                    event.preventDefault();
                    list.html('');
                    $('.sibling-menu-list').addClass('active');
                    $('.back').click(function () {
                        $(this).parents('.sibling-menu-list').removeClass('active');
                    })
                    // 讀取次選單商品列表
                    $.ajax({
                        type: "GET",
                        url: jsonLink,
                        success: function (data) {

                            for (i = 0; i < data.length; i++) {
                                list.append('<li><img src="' + data[i].itemSrc +
                                    '" class="img-fluid" alt=""><p>' + data[i].itemName +
                                    '<span>' + data[i].itemInfo +
                                    '</span></p><ul class="dots"><li style="background:#000;" data-src="Content/img/shop.png"></li><li style="background:#eee;" data-src="Content/img/shop_1.png"></li></ul></li>'
                                )

                            }
                            // 點擊li點 切換圖片attr
                            $('.sibling-menu-list .dots li').each(function () {
                                var img_link = $(this).data('src');

                                $(this).click(function () {
                                    $(this).parent().siblings('img')
                                        .attr('src', img_link);
                                })
                            });
                        },
                        error: function () {
                            $('.sibling-menu-list').html("<p>目前沒有資料</p>");
                        },
                        dataType: "json"
                    });
                })

            })

        });
    </script>
  

</body>

</html>